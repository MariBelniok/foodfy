{% extends "admin/layout.njk" %}
{% block head %}
<title>Foodfy Admin - Cadastro</title>
{% endblock %}
{% block content %}
<div class="admin-create-container">
    <form method="POST" action="/admin?_method=DELETE" id="delete-btn">
        <div class="delete-btn">
            <input type="hidden" name="id" value="{{item.id}}">
            <button type="submit">Deletar</button> 
        </div>
    </form>
    <form  method="POST" action="/admin/?_method=PUT" >
        <div class="admin-create-head">
            <h1>Editando receita </h1> 
            <input type="hidden" name="id" value="{{item.id}}">
            <button type="submit">Salvar receita</button> 
        </div>
            <div class="form-item">
            <div>Imagem da Receita</div>
            <input type="url" name="image" placeholder="HTTP://" value="{{ item.image }}">
        </div>
        <div class="form-item" id="ingredients">
            <div>Ingredientes</div>
            {% for ingredient in item.ingredients %}
            <div class="ingredient">
                <input type="text" name="ingredients[]" value="{{ ingredient }}">                
            </div>
            {% endfor %}
        </div>
        <button type="button" class="add-ingredient">Adicionar novo ingrediente</button>
        <div class="form-item" id="prepares">
            <div>Modo de Preparo</div>
            {% for prepare in item.prepare %}
            <div class="prepare">
                <input type="text" name="prepare[]" value="{{ prepare }}">
            </div>
            {% endfor %}
        </div>
        <button type="button" class="add-prepare">Adicionar novo passo</button>
        <div class="form-item">
            <div>Informações Adicionais</div>
            <textarea name="info" id="" cols="60" rows="20">
                {{ item.info }}
            </textarea>
        </div>
    </form>
    
</div>

<script>
    const btnDelete = document.querySelector('#delete-btn')
    btnDelete.addEventListener('submit',(e) => {
        const confirmation = confirm("Deletar essa receita?")
        if(!confirmation){
            e.preventDefault()
        }
    })
</script>
{% endblock %}